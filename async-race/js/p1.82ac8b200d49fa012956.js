(()=>{"use strict";var t={946:(t,e,n)=>{n.r(e)},612:(t,e,n)=>{n.r(e)},188:(t,e,n)=>{n.r(e)},911:(t,e,n)=>{n.r(e)},322:(t,e,n)=>{n.r(e)},885:(t,e,n)=>{n.r(e)},107:(t,e,n)=>{n.r(e)},110:(t,e,n)=>{n.r(e)},296:(t,e,n)=>{n.r(e)},477:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(34)),r=i(n(791)),s=i(n(887)),o=i(n(922));e.default=class{constructor(){this.container=document.body,this.winner=new s.default,this.garage=new r.default(this.winner),this.header=new a.default(this.garage.element,this.winner.element),this.main=new o.default("div",["main"]),this.main.element.append(this.garage.element,this.winner.element)}run(){this.container.append(this.header.element,this.main.element)}}},531:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((i=i.apply(t,e||[])).next())}))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(946);const r=a(n(922)),s=a(n(734)),o=n(335),l=n(499),d=n(927);class u extends r.default{constructor(t,e){super("div",["car"]),this.carField=new r.default("div",["car-field"]),this.carTrack=new r.default("div",["track-car"]),this.carImage=new r.default("div",["img-car"]),this.selectCarBtn=new s.default("select"),this.removeCarBtn=new s.default("remove"),this.startEngineBtn=new s.default("start"),this.stopEngineBtn=new s.default("stop"),this.isAnimated=!0,this.isEngineStop=!1,this.updatingCarForm=e,this.element.setAttribute("id",t.id.toString()),this.removeCarBtn.button.setAttribute("id",t.id.toString()),this.carModel=new r.default("p",["name-car"],t.name),this.carField.element.append(this.selectCarBtn.button,this.removeCarBtn.button,this.carModel.element),this.stopEngineBtn.button.disabled=!0,this.startEngineBtn.button.disabled=!1,this.stopEngineBtn.button.classList.add("inactive-btn"),this.renderCarTrack(t),this.switchEngineStatus(),this.updateCar(),this.deleteCar(),this.element.append(this.carField.element,this.carTrack.element)}renderCarTrack(t){const e=new r.default("div",["controls-car"]),n=document.createElement("img");e.element.append(this.startEngineBtn.button,this.stopEngineBtn.button),this.carImage.element.append((0,o.getCarModel)(t.color)),n.classList.add("img-flag"),n.src="./assets/flag.svg",n.alt="flag",this.carTrack.element.append(e.element,this.carImage.element,n)}moveCar(){return i(this,void 0,void 0,(function*(){const t=yield(0,d.getEngineParameters)(+this.element.id,"started"),e=t.distance/t.velocity;return this.switchActiveButton(),this.isEngineStop=!1,this.isAnimated=!0,this.animateCarMoving(e),(e/l.MS_IN_SECONDS).toFixed(l.ROUNDER)}))}stopCar(){return i(this,void 0,void 0,(function*(){this.switchActiveButton(),yield(0,d.getEngineParameters)(+this.element.id,"stopped"),this.isAnimated=!1,this.isEngineStop=!0,this.carImage.element.style.transform="translateX(0px)"}))}switchEngineStatus(){this.startEngineBtn.button.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield this.moveCar(),this.getStatusEngine(this.element.id)})))),this.stopEngineBtn.button.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield this.stopCar()}))))}animateCarMoving(t){const e=this.carTrack.element.offsetWidth-this.carImage.element.offsetWidth-l.CAR_START_POSITION,n=performance.now();let i=0,a=0;const r=s=>{a=s-n,i=e/t*a,this.isEngineStop&&(i=0),this.carImage.element.style.transform=`translateX(${i}px)`,a<t&&this.isAnimated&&window.requestAnimationFrame(r)};window.requestAnimationFrame(r)}getStatusEngine(t){return i(this,void 0,void 0,(function*(){const e=yield(0,d.getStatusDrive)(t);return e.status===l.STATUS_BREAKING&&(this.isAnimated=!1),e.status}))}updateCar(){this.selectCarBtn.button.addEventListener("click",(()=>{this.updatingCarForm.switchActive(),this.updatingCarForm.submit.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){t.preventDefault(),this.carModel.updateTextContent(this.updatingCarForm.inputText.value),this.carImage.element.append((0,o.getCarModel)(this.updatingCarForm.inputColor.value)),yield(0,d.updateCarData)(this.element.id,{name:this.updatingCarForm.inputText.value,color:this.updatingCarForm.inputColor.value}),this.updatingCarForm.cleanInputs(),this.updatingCarForm.switchActive()}))),{once:!0})}))}deleteCar(){this.removeCarBtn.button.addEventListener("click",(()=>{this.element.remove()}))}switchActiveButton(){this.startEngineBtn.button.disabled=!this.startEngineBtn.button.disabled,this.startEngineBtn.button.classList.toggle("inactive-btn"),this.stopEngineBtn.button.disabled=!this.stopEngineBtn.button.disabled,this.stopEngineBtn.button.classList.toggle("inactive-btn")}}e.default=u},180:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(612);const a=i(n(922)),r=n(335),s=n(499);class o extends a.default{constructor(t){super("form",["form"]),this.inputText=(0,r.createInputElement)("text","input-text","","Car name"),this.inputColor=(0,r.createInputElement)("color","input-color",""),this.submit=(0,r.createInputElement)("submit","input-submit",t),this.element.append(this.inputText,this.inputColor,this.submit)}cleanInputs(){this.inputText.value="",this.inputColor.value=s.DEFAULT_COLOR}switchActive(){this.element.classList.toggle("form-inactive"),[...this.element.children].forEach((t=>{const e=t;e.disabled=!e.disabled}))}}e.default=o},470:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(922));n(188);class r extends a.default{constructor(t){super("h2",["garage-title"]),this.numbers=t,this.element.textContent=`Garage (${t})`}updateValue(t){this.numbers=t,this.element.textContent=`Garage (${this.numbers})`}addCar(){this.element.textContent=`Garage (${++this.numbers})`}removeCar(){this.element.textContent=`Garage (${--this.numbers})`}get getValue(){return this.numbers}}e.default=r},791:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((i=i.apply(t,e||[])).next())}))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(911);const r=a(n(922)),s=a(n(180)),o=a(n(734)),l=a(n(159)),d=a(n(531)),u=a(n(470)),c=a(n(502)),h=n(927),g=n(335),m=n(499);class f extends r.default{constructor(t){super("div",["garage"]),this.creatingCarForm=new s.default("create"),this.updatingCarForm=new s.default("update"),this.controls=new r.default("div",["controls"]),this.raceAllBtn=new o.default("race"),this.resetAllBtn=new o.default("reset"),this.generatingCarsBtn=new o.default("generate-cars"),this.garageArea=new r.default("div",["garage-area"]),this.prevGaragePageBtn=new o.default("prev"),this.nextGaragePageBtn=new o.default("next"),this.currentGaragePage=m.DEFAULT_PAGE_NUMBER,this.currentCars=[],this.carsField=new r.default("div",["cars-field"]),this.manageGarageBtns=new r.default("div",["garage-manage"]),this.popup=null,this.isStarted=!0,this.winner=t,this.resetAllBtn.button.disabled=!0,this.resetAllBtn.button.classList.add("inactive-btn"),this.controls.element.append(this.raceAllBtn.button,this.resetAllBtn.button,this.generatingCarsBtn.button),this.carsNumber=new u.default(this.currentCars.length),this.updatingCarForm.switchActive(),this.pageNumber=new l.default(this.currentGaragePage),this.prevGaragePageBtn.button.disabled=!1,this.nextGaragePageBtn.button.disabled=!1,this.getGarageCars(),this.createCar(),this.startRace(),this.stopRace(),this.deleteCar(),this.createRandomCars(),this.switchGaragePage(),this.renderGaragePage(),this.updateCarsWinner()}renderGaragePage(){this.manageGarageBtns.element.append(this.prevGaragePageBtn.button,this.nextGaragePageBtn.button),this.garageArea.element.append(this.carsNumber.element,this.pageNumber.element,this.carsField.element,this.manageGarageBtns.element),this.element.append(this.creatingCarForm.element,this.updatingCarForm.element,this.controls.element,this.garageArea.element)}getGarageCars(){return i(this,void 0,void 0,(function*(){const t=yield(0,h.getCurrentGarageData)(this.currentGaragePage.toString());this.renderGarageCars(t.allCars),this.carsNumber.updateValue(+t.carsCount)}))}renderGarageCars(t){this.carsField.element.innerHTML="",this.currentCars.length=0,t.forEach((t=>{const e=new d.default(t,this.updatingCarForm);this.currentCars.push(e),this.carsField.element.append(e.element)}))}startRace(){this.raceAllBtn.button.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.isStarted=!0,this.popup=null,this.raceAllBtn.button.disabled=!0,this.resetAllBtn.button.disabled=!1,this.disableManageGarage(),this.currentCars.forEach((t=>i(this,void 0,void 0,(function*(){const e=yield t.moveCar();if((yield t.getStatusEngine(t.element.id))===m.STATUS_SUCCESS&&this.isStarted&&!this.popup){const n=t.carModel.element.textContent;this.popup=new c.default(n,e),this.element.append(this.popup.element),yield(0,g.setCarWinner)(t.element.id,e),this.winner.createTableBody()}}))))}))))}stopRace(){this.resetAllBtn.button.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){this.raceAllBtn.button.disabled=!1,this.resetAllBtn.button.disabled=!0,this.isStarted=!1,this.disableManageGarage(),this.popup&&this.popup.remove(),yield Promise.all(this.currentCars.map((t=>t.stopCar())))}))))}createCar(){this.creatingCarForm.submit.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){t.preventDefault();const e=yield(0,h.createCarData)({name:this.creatingCarForm.inputText.value,color:this.creatingCarForm.inputColor.value}),n=new d.default(e,this.updatingCarForm);this.currentCars.push(n),this.currentCars.length<=m.CARS_LIMIT_GARAGE&&this.carsField.element.append(n.element),this.carsNumber.addCar(),this.creatingCarForm.cleanInputs(),yield this.getGarageCars()}))))}deleteCar(){this.carsField.element.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){const e=t.target;"remove"===e.textContent&&(yield(0,h.deleteCarData)(e.id),yield this.getGarageCars(),yield this.deleteCarWinner(e.id)),this.currentCars.length||(this.pageNumber.updateValue(--this.currentGaragePage),yield this.getGarageCars())}))))}createRandomCars(){this.generatingCarsBtn.button.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const t=[];for(let e=0;e<m.RANDOM_CARS_AMOUNT;e++)t.push({name:(0,g.getRandomCarName)(),color:(0,g.getRandomColor)()});const e=t.map((t=>(0,h.createCarData)(t)));yield Promise.all(e),this.getGarageCars()}))))}switchGaragePage(){this.manageGarageBtns.element.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){switch(t.target.textContent){case"next":this.currentGaragePage*m.CARS_LIMIT_GARAGE<this.carsNumber.getValue&&this.pageNumber.updateValue(++this.currentGaragePage);break;case"prev":if(this.currentGaragePage===m.DEFAULT_PAGE_NUMBER)return;this.pageNumber.updateValue(--this.currentGaragePage),(0,h.getCurrentGarageData)(this.currentGaragePage.toString());break;default:return}const e=yield(0,h.getCurrentGarageData)(this.currentGaragePage.toString());this.renderGarageCars(e.allCars)}))))}deleteCarWinner(t){return i(this,void 0,void 0,(function*(){(yield(0,g.getAllCars)(t)).length&&(yield(0,h.deleteCarWinnerData)(t),yield this.winner.createTableBody())}))}updateCarsWinner(){this.updatingCarForm.submit.addEventListener("click",(()=>{this.winner.createTableBody()}))}disableManageGarage(){this.prevGaragePageBtn.button.disabled=!this.prevGaragePageBtn.button.disabled,this.nextGaragePageBtn.button.disabled=!this.nextGaragePageBtn.button.disabled,this.resetAllBtn.button.classList.toggle("inactive-btn"),this.raceAllBtn.button.classList.toggle("inactive-btn"),this.manageGarageBtns.element.classList.toggle("inactive-btn")}}e.default=f},159:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(322);const a=i(n(922));class r extends a.default{constructor(t){super("h2",["garage-page"]),this.element.textContent=`Page #${t}`}updateValue(t){this.element.textContent=`Page #${t}`}}e.default=r},34:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(885);const a=i(n(922));class r extends a.default{constructor(t,e){super("div",["header"]),this.garage=t,this.winner=e,this.btnGarage=new a.default("button",["btn"],"To garage"),this.btnWinner=new a.default("button",["btn"],"To winner"),this.element.append(this.btnGarage.element,this.btnWinner.element),this.switchPage()}switchPage(){this.element.childNodes.forEach((t=>{t.addEventListener("click",(t=>{if("To garage"===t.target.textContent){if(this.winner.classList.contains("invisible"))return;this.removeCLassVisible(),this.winner.classList.add("invisible")}else{if(this.garage.classList.contains("invisible"))return;this.removeCLassVisible(),this.garage.classList.add("invisible")}}))}))}removeCLassVisible(){[this.garage,this.winner].forEach((t=>{t.classList.remove("invisible")}))}}e.default=r},502:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(n(922));n(107);class r extends a.default{constructor(t,e){super("div",["popup"]),this.title=new a.default("div",["popup__title"]),this.title.element.textContent=`The winner is ${t} with time ${e}s! Press reset to continue.`,this.element.append(this.title.element)}remove(){this.element.remove()}}e.default=r},887:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((i=i.apply(t,e||[])).next())}))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=a(n(922));n(110);const s=n(927),o=n(335),l=n(499),d=a(n(470)),u=a(n(159)),c=a(n(734));class h extends r.default{constructor(){super("div",["winner","invisible"]),this.currentWinnersPage=l.DEFAULT_PAGE_NUMBER,this.carsNumber=new d.default(l.DEFAULT_PAGE_NUMBER),this.table=new r.default("table",["table"]),this.thead=new r.default("thead",["table-head"]),this.tbody=new r.default("tbody",["table-body"]),this.prevWinnersBtn=new c.default("prev"),this.nextWinnersBtn=new c.default("next"),this.manageWinnersBtns=new r.default("div",["winner-manage"]),this.isWinMax=!0,this.isTimeBest=!0,this.pageNumber=new u.default(this.currentWinnersPage),this.createTableHead(),this.createTableBody(),this.switchWinnerPage(),this.manageWinnersBtns.element.append(this.prevWinnersBtn.button,this.nextWinnersBtn.button),this.element.append(this.carsNumber.element,this.pageNumber.element,this.table.element,this.manageWinnersBtns.element)}createTableHead(){l.WINNER_COLUMNS.forEach((t=>{const e=new r.default("th",["th"],t);"Wins"===t?this.sortTable(e.element,"wins",this.isWinMax):"Best time (s)"===t&&this.sortTable(e.element,"time",this.isTimeBest),this.thead.element.append(e.element)})),this.table.element.append(this.thead.element)}sortTable(t,e,n){const a=document.createElement("span");let r=n;t.classList.add("active-column"),t.append(a),t.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){[...this.thead.element.children].forEach((t=>{t.children.length&&t.lastChild.classList.remove("arrow-icon")}));const t=r?"DESC":"ASC";r=!r,a.classList.contains("arrow-icon")||a.classList.add("arrow-icon");const n=yield(0,s.sortWinner)(e,t,this.currentWinnersPage),i=yield(0,o.convertCarWinners)(n);a.classList.toggle("arrow-rotated"),this.updateTableBody(i)}))))}updateTableBody(t){return i(this,void 0,void 0,(function*(){const e=1===this.currentWinnersPage?"":(this.currentWinnersPage-1).toString();this.tbody.element.innerHTML="",t.forEach(((t,n)=>{const i=new r.default("tr",["tr"]),a=new r.default("td",["td"],`${e}${n+1}`);i.element.append(a.element),t.forEach(((t,e)=>{const n=new r.default("td",["td"]);e?n.element.textContent=`${t}`:n.element.append((0,o.getCarModel)(t)),i.element.append(n.element)})),this.tbody.element.append(i.element)})),this.table.element.append(this.tbody.element)}))}createTableBody(){return i(this,void 0,void 0,(function*(){const t=yield(0,s.getWinnersData)(this.currentWinnersPage),e=yield(0,o.convertCarWinners)(t.allCars);this.carsNumber.updateValue(+t.carsCount),this.updateTableBody(e)}))}switchWinnerPage(){this.manageWinnersBtns.element.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){switch(t.target.textContent){case"next":this.currentWinnersPage*l.CARS_LIMIT_WINNERS<this.carsNumber.getValue&&(this.pageNumber.updateValue(++this.currentWinnersPage),this.createTableBody());break;case"prev":if(this.currentWinnersPage===l.DEFAULT_PAGE_NUMBER)return;this.pageNumber.updateValue(--this.currentWinnersPage),this.createTableBody();break;default:return}}))))}}e.default=h},499:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_COLOR=e.STATUS_SUCCESS=e.STATUS_BREAKING=e.ROUNDER=e.MS_IN_SECONDS=e.CARS_LIMIT_WINNERS=e.WINNER_COLUMNS=e.BASE_URL=e.RANDOM_CARS_AMOUNT=e.CARS_LIMIT_GARAGE=e.CARS_BRANDS=e.CARS_MODELS=e.CAR_START_POSITION=e.DEFAULT_PAGE_NUMBER=void 0,e.DEFAULT_PAGE_NUMBER=1,e.CAR_START_POSITION=63,e.CARS_LIMIT_GARAGE=7,e.CARS_LIMIT_WINNERS=10,e.RANDOM_CARS_AMOUNT=100,e.BASE_URL="http://127.0.0.1:3000/",e.WINNER_COLUMNS=["#","Car","Name","Wins","Best time (s)"],e.MS_IN_SECONDS=1e3,e.CARS_MODELS=["Roadster","S","X","3","Y","Cybertruck","X5","X7","X3","X6","GT4","FXX","599 GTO","Enzo","458 Italia","250 GTO","Priora","4x4","Rio","Focus","Kalina","Vesta","Spark","Lacetti","Nexia","Matiz","Cobalt","Captiva","A7","A5","A3","A8","TT","Corolla","Camry","RAV4","Impreza","WRX","ES","LS","RX","GX","LX","GS","LC500","Gallardo","Aventador","911","Cayenne","FX37"],e.CARS_BRANDS=["Audi","Alfa Romeo","Alpina","Aston Martin","Axon","Ford","Ferrari","Fiat","GAZ","GMC","Honda","Hummer","Hyundai","Infiniti","Isuzu","JAC","Jaguar","Jeep","Kamaz","Lada","Lexus","Lotus","MAN","Maybach","MAZ","Mazda","McLaren","Nissan","Opel","Paccar","Pagani","Pontiac","Porsche","Renault","Skoda","Smart","Subaru","Suzuki","Tesla","Toyota","UAZ","Volvo","ZAZ","XPeng","TVR","Saab","RAM","Chevrolet","Mazzanti","Daewoo"],e.ROUNDER=2,e.STATUS_BREAKING=500,e.STATUS_SUCCESS=200,e.DEFAULT_COLOR="#000000"},922:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t="div",e=[],n=""){this.element=document.createElement(t),this.element.classList.add(...e),this.element.textContent=n}updateTextContent(t){this.element.textContent=t}}},734:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.button=document.createElement("button"),this.button.classList.add(t),this.button.textContent=t.replace("-"," ")}}},927:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.sortWinner=e.deleteCarWinnerData=e.createCarWinner=e.updateCarWinnerData=e.getAllWinners=e.getCarWinnerData=e.getWinnersData=e.getStatusDrive=e.updateCarData=e.createCarData=e.deleteCarData=e.getCarData=e.getCurrentGarageData=e.getEngineParameters=void 0;const a=n(499);e.getCurrentGarageData=function(t){return i(this,void 0,void 0,(function*(){let e="0";const n=yield fetch(`${a.BASE_URL}garage?_page=${t}&_limit=7`),i=yield n.json();return n.headers.get("X-Total-Count")&&(e=n.headers.get("X-Total-Count")),{allCars:i,carsCount:e}}))},e.getEngineParameters=function(t,e){return i(this,void 0,void 0,(function*(){let n;try{const i=yield fetch(`${a.BASE_URL}engine?id=${t}&status=${e}`,{method:"PATCH"});n=yield i.json()}catch(t){n={velocity:0,distance:5e5}}return n}))},e.createCarData=function(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${a.BASE_URL}garage`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield e.json()}))},e.updateCarData=function(t,e){return i(this,void 0,void 0,(function*(){yield fetch(`${a.BASE_URL}garage/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.status)).catch((t=>t))}))},e.deleteCarData=function(t){return i(this,void 0,void 0,(function*(){yield fetch(`${a.BASE_URL}garage/${t}`,{method:"DELETE"}).then((t=>t.status)).catch((t=>t))}))},e.getStatusDrive=function(t){return i(this,void 0,void 0,(function*(){return yield fetch(`${a.BASE_URL}engine?id=${t}&status=drive`,{method:"PATCH"})}))},e.getCarData=function(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${a.BASE_URL}garage/${t}`);return yield e.json()}))},e.getWinnersData=function(t){return i(this,void 0,void 0,(function*(){let e="0";const n=yield fetch(`${a.BASE_URL}winners?_page=${t}&_limit=10`),i=yield n.json();return n.headers.get("X-Total-Count")&&(e=n.headers.get("X-Total-Count")),{allCars:i,carsCount:e}}))},e.getAllWinners=function(){return i(this,void 0,void 0,(function*(){const t=yield fetch(`${a.BASE_URL}winners?_limit=10`);return yield t.json()}))},e.getCarWinnerData=function(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${a.BASE_URL}winners/${t}`);return yield e.json()}))},e.updateCarWinnerData=function(t,e){return i(this,void 0,void 0,(function*(){yield fetch(`${a.BASE_URL}winners/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>t.status)).catch((t=>t))}))},e.createCarWinner=function(t){return i(this,void 0,void 0,(function*(){yield fetch(`${a.BASE_URL}winners`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>t.status)).catch((t=>t))}))},e.deleteCarWinnerData=function(t){return i(this,void 0,void 0,(function*(){yield fetch(`${a.BASE_URL}winners/${t}`,{method:"DELETE"}).then((t=>t.status)).catch((t=>t))}))},e.sortWinner=function(t,e,n){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${a.BASE_URL}winners?_page=${n}&_limit=10&_sort=${t}&_order=${e}`);return yield i.json()}))}},335:function(t,e,n){var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(a,r){function s(t){try{l(i.next(t))}catch(t){r(t)}}function o(t){try{l(i.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getCarModel=e.setCarWinner=e.getAllCars=e.convertCarWinners=e.getRandomCarName=e.getRandomColor=e.createInputElement=void 0;const a=n(499),r=n(927);function s(t){return i(this,void 0,void 0,(function*(){return(yield(0,r.getAllWinners)()).filter((e=>e.id===+t))}))}e.createInputElement=function(t,e,n,i=""){const a=document.createElement("input");return a.type=t,a.classList.add(e),a.value=n,a.placeholder=i,a},e.getRandomColor=function(){let t="#";for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},e.getRandomCarName=function(){const t=a.CARS_MODELS,e=a.CARS_BRANDS,n=t=>Math.ceil(Math.random()*(t.length-1));return`${e[n(e)]} ${t[n(t)]}`},e.convertCarWinners=function(t){return i(this,void 0,void 0,(function*(){const e=t.map((t=>i(this,void 0,void 0,(function*(){const e=[],n=yield(0,r.getCarData)(t.id);return e.push(n.color,n.name,t.wins.toString(),t.time.toString()),e}))));return Promise.all(e)}))},e.getAllCars=s,e.setCarWinner=function(t,e){return i(this,void 0,void 0,(function*(){if((yield s(t)).length){const n=yield(0,r.getCarWinnerData)(t);++n.wins,n.time=+e>n.time?n.time:+e,yield(0,r.updateCarWinnerData)(t,{wins:n.wins,time:n.time})}else yield(0,r.createCarWinner)({id:+t,wins:1,time:+e})}))},e.getCarModel=function(t){const e=document.createElement("object");return e.type="image/svg+xml",e.data="./assets/car.svg",e.classList.add("car-svg"),e.addEventListener("load",(()=>{var n,i;null===(i=null===(n=e.getSVGDocument())||void 0===n?void 0:n.getElementById("car"))||void 0===i||i.setAttribute("fill",t)})),e}},303:function(t,e,n){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),n(296),(new(i(n(477)).default)).run()}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,n),r.exports}n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(303)})();